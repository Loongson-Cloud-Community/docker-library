# This file is generated by the template.

REGISTRY	?=lcr.loongnix.cn
ORGANIZATION	?=cvat-ai
REPOSITORY	?=cvat
TAG		?=v2.55.0
LATEST		?=true

IMAGE=$(REGISTRY)/$(ORGANIZATION)/$(REPOSITORY):$(TAG)
LATEST_IMAGE=$(REGISTRY)/$(ORGANIZATION)/$(REPOSITORY):latest

default: image

image: build_ui build_server
build_ui:
	cd cvat && \
	docker build -t lcr.loongnix.cn/cvat/ui:v2.55.0 -f Dockerfile.ui .
#	docker compose -f docker-compose.yml -f docker-compose.dev.yml build cvat_ui
build_server:
	cd cvat && \
	docker build -t lcr.loongnix.cn/cvat/server:v2.55.0 -f Dockerfile .
#	docker compose -f docker-compose.yml -f docker-compose.dev.yml build cvat_server

push: push_ui push_server

push_ui:
	docker push lcr.loongnix.cn/cvat/server:v2.55.0
push_server:
	docker push lcr.loongnix.cn/cvat/ui:v2.55.0

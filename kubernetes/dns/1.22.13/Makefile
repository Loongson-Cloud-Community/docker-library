# This file is generated by the template.

REGISTRY?=lcr.loongnix.cn
ORGANIZATION?=k8s-staging-dns
REPOSITORY?=k8s-dns-node-cache
TAG?=1.22.13

IMAGE=$(REGISTRY)/$(ORGANIZATION)/$(REPOSITORY):$(TAG)


default: image

src:
	git clone --depth 1 -b loong64-1.22.13 https://github.com/Loongson-Cloud-Community/dns src

image: src
	cd src && make containers && docker tag lcr.loongnix.cn/k8s-staging-dns/k8s-dns-node-cache-loong64:1.22.13-dirty $(IMAGE)


push:
	docker push $(IMAGE)
